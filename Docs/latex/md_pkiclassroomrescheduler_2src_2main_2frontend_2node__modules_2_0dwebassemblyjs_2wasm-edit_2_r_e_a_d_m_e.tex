\chapter{@webassemblyjs/wasm-\/edit}
\hypertarget{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e}{}\label{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e}\index{"@webassemblyjs/wasm-\/edit@{"@webassemblyjs/wasm-\/edit}}
\label{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4372}%
\Hypertarget{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4372}%
 \begin{quote}
Rewrite a WASM binary \end{quote}
Replace in-\/place an AST node in the binary.\hypertarget{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4373}{}\doxysection{\texorpdfstring{Installation}{Installation}}\label{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4373}

\begin{DoxyCode}{0}
\DoxyCodeLine{yarn\ add\ @webassemblyjs/wasm-\/edit}

\end{DoxyCode}
\hypertarget{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4374}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4374}
Update\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ edit\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ visitors\ =\ \{}
\DoxyCodeLine{\ \ ModuleImport(\{\ node\ \})\ \{}
\DoxyCodeLine{\ \ \ \ node.module\ =\ "{}foo"{};}
\DoxyCodeLine{\ \ \ \ node.name\ =\ "{}bar"{};}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ edit(binary,\ visitors);}

\end{DoxyCode}


Replace\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ edit\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ visitors\ =\ \{}
\DoxyCodeLine{\ \ Instr(path)\ \{}
\DoxyCodeLine{\ \ \ \ const\ newNode\ =\ t.callInstruction(t.indexLiteral(0));}
\DoxyCodeLine{\ \ \ \ path.replaceWith(newNode);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ edit(binary,\ visitors);}

\end{DoxyCode}


Remove\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ edit\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ visitors\ =\ \{}
\DoxyCodeLine{\ \ ModuleExport(\{\ node\ \})\ \{}
\DoxyCodeLine{\ \ \ \ path.remove()}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ edit(binary,\ visitors);}

\end{DoxyCode}


Insert\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ add\ \}\ from\ "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const\ binary\ =\ [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const\ newBinary\ =\ add(actualBinary,\ [}
\DoxyCodeLine{\ \ t.moduleImport("{}env"{},\ "{}mem"{},\ t.memory(t.limit(1)))}
\DoxyCodeLine{]);}

\end{DoxyCode}
\hypertarget{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4375}{}\doxysection{\texorpdfstring{Providing the AST}{Providing the AST}}\label{md_pkiclassroomrescheduler_2src_2main_2frontend_2node__modules_2_0dwebassemblyjs_2wasm-edit_2_r_e_a_d_m_e_autotoc_md4375}
Providing an AST allows you to handle the decoding yourself, here is the API\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{addWithAST(Program,\ ArrayBuffer,\ Array<Node>):\ ArrayBuffer;}
\DoxyCodeLine{editWithAST(Program,\ ArrayBuffer,\ visitors):\ ArrayBuffer;}

\end{DoxyCode}


Note that the AST will be updated in-\/place. 